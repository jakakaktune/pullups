<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pull-up Buddy</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Lilita+One&display=swap');

        @keyframes drift {
            from {
                transform: translateX(0);
            }

            to {
                transform: translateX(100vw);
            }
        }

        .cloud-animate {
            animation: drift linear infinite;
            /* This ensures they start at different points in the animation */
            animation-delay: calc(var(--delay) * -10s);
        }
    </style>
</head>

<body
    class="bg-gradient-to-b from-[#24273a] to-[#636ca0] min-h-screen overflow-x-hidden text-white font-['Lilita_One',sans-serif]">

    {% macro stat_card(label, value, show_star=False) %}
    <div
        class="group relative bg-[rgba(0,0,0,0.4)] backdrop-blur-sm rounded-[29px] p-6 transition-all duration-300 hover:bg-[rgba(0,0,0,0.5)] hover:scale-105 hover:shadow-2xl flex flex-col items-center justify-center min-h-[160px]">
        {% if show_star %}
        <div class="absolute -top-6 -left-6 flex items-center justify-center w-[66px] h-[66px] animate-pulse z-20">
            <svg class="w-12 h-12 text-yellow-400 rotate-[-24deg] drop-shadow-md" fill="currentColor"
                viewBox="0 0 24 24">
                <path
                    d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
            </svg>
        </div>
        {% endif %}
        <span class="text-[32px] leading-tight opacity-90 mb-1">{{ label }}</span>
        <span class="text-[75px] leading-none drop-shadow-lg">{{ value }}</span>
    </div>
    {% endmacro %}

    <div class="absolute h-[100vh] w-[100vw] min-h-screen overflow-hidden z-[-1]">
        {% for row in range(3) %}
            {% for col in range(4) %}
                
                {% set base_top = row * 30 %}
                {% set base_left = col * 25 %}

                {% set top_pos = base_top + range(-5, 10)|random %}
                {# Start them off-screen to the left so they drift in #}
                {% set left_pos = base_left + range(-5, 15)|random - 20 %}
                
                {% set cloud_width = 22 - (top_pos / 4) %}
                {% set cloud_opacity = 0.7 - (top_pos / 150) %}
                
                {# LOGIC: Big clouds (heavy) move faster, small move slower #}
                {% set speed = 200 + (top_pos * 2) %} 
                {% set delay = range(0, 100)|random %}

                <img src="/public/cloud.svg" 
                    class="absolute pointer-events-none cloud-animate" 
                    style="top: {{ top_pos }}%; 
                            left: {{ left_pos }}%; 
                            width: {{ cloud_width }}rem; 
                            opacity: {{ cloud_opacity }};
                            z-index: {{ 100 - top_pos|int }};
                            --delay: {{ delay }};
                            animation-duration: {{ speed }}s;">
            {% endfor %}
        {% endfor %}
    </div>

    <div
        class="relative z-10 container mx-auto px-8 py-12 max-w-[1400px] min-h-screen flex flex-col md:flex-row gap-12">

        <div class="flex-1">
            <header class="mb-12">
                <h1 class="text-[64px] drop-shadow-2xl mb-4">Pull-up Buddy</h1>
            </header>

            <section class="mb-16">
                <h2 class="text-[48px] mb-8 drop-shadow-lg">{{ current_month_name }}</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl">
                    {{ stat_card('Day', stats.today, goals_met.day) }}
                    {{ stat_card('Week', stats.this_week, goals_met.week) }}
                    {{ stat_card('Month', stats.this_month, goals_met.month) }}
                </div>
            </section>

            <section>
                <h2 class="text-[48px] mb-8 drop-shadow-lg">All time records</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 max-w-3xl mb-6">
                    {{ stat_card('Day', stats.max_day) }}
                    {{ stat_card('Week', stats.max_week) }}
                    {{ stat_card('Month', stats.max_month) }}
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl">
                    {{ stat_card('Single rep', stats.max_set) }}
                    {{ stat_card('Single session', stats.max_session) }}
                </div>
            </section>
        </div>

        <div class="fixed right-0 bottom-0 h-[80vh] aspect-[1.5] flex items-end justify-end">
            <div class="relative h-full w-8 border border-4 border-b-0 border-black">
                <div style="bottom: {{ progress_percent }}%; transform: translateY(64%);"
                    class="absolute transition-all duration-[2000ms] ease-out z-20">
                    <img src="/public/pullup-dude.svg"
                        class="w-10 h-10 object-contain drop-shadow-[0_0_15px_rgba(255,255,255,0.8)]" alt="Climber">
                </div>
            </div>

            <div class="h-[10%]">
                <img src="/public/gediminas.svg" class="h-[100%] object-contain drop-shadow-2xl" alt="Gediminas Tower">
                <!-- <span class="text-xl opacity-80 mt-2 drop-shadow-md tracking-wider">Gediminas</span> -->
            </div>

            <div class="h-[30%]">
                <!-- <span class="text-xl opacity-80 mb-2 drop-shadow-md tracking-wider">Pilsotas</span> -->
                <img src="/public/pilsotas.svg" class="h-[100%] object-contain drop-shadow-2xl" alt="Pilsotas">
            </div>

            <div class="h-[100%]">
                <img src="/public/tv-tower.svg" class="h-[100%] object-contain drop-shadow-2xl" alt="Vilnius TV Tower">
            </div>

        </div>
    </div>
</body>

</html>